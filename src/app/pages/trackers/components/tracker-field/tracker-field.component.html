<div class="field-cont" (mouseover)="onFieldHover()" (mouseleave)="onFieldHoverLeave()">
  <div class="field-sec">
    <!-- Text -->
    <mat-form-field class="left" style="width: 100%" *ngIf="field.type == TrackerFieldTypeEnum.text" >
      <mat-label *ngIf="!field.labelHidden" [attr.for]="field">{{field.label}}</mat-label>
      <input matInput 
        (change)="save($event)"
        [id]="field.label" type="text" [value]="field.value">
    </mat-form-field>
    <!-- Number -->
    <app-number-picker *ngIf="field.type == TrackerFieldTypeEnum.number" 
      [field]="field" (onChangeEvent)="saveNumber($event)">
    </app-number-picker>
    <!-- Checkbox -->
    <mat-checkbox *ngIf="field.type == TrackerFieldTypeEnum.checkbox"
      [checked]="field.value"
      (change)="onCheckboxChange($event)">{{field.labelHidden ? "" : field.label}}</mat-checkbox>
    <!-- Date -->
    <mat-form-field  *ngIf="field.type == TrackerFieldTypeEnum.date">
      <input matInput [matDatepicker]="picker" [placeholder]="field.label">
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>      
    <!-- Date Range -->
    <mat-form-field *ngIf="field.type == TrackerFieldTypeEnum.daterange && dateRangeDisp">
      <input matInput
          [placeholder]="field.labelHidden ? '' : field.label"
          [satDatepicker]="picker"
          [value]="dateRangeDisp"
          (dateChange)="saveDate($event)">
      <sat-datepicker #picker [rangeMode]="true"></sat-datepicker>
      <sat-datepicker-toggle matSuffix [for]="picker"></sat-datepicker-toggle>
    </mat-form-field>
    <!-- Rater
      <app-rater *ngIf="field.type == '8'" 
      [name]="field.options[0].optName" [rating]="field.options[0].optValue"
      (onChangeNameEvent)="saveOptName($event)" (onChangeRatingEvent)="saveOptVal($event)">
    </app-rater> -->
    <!-- Title -->
    <div class="title-cont" *ngIf="field.type == TrackerFieldTypeEnum.title">
      <input type="text" class="title" 
      (change)="save($event)" [value]="field.value" 
      [id]="field.label">
    </div>
    <!-- Wiki Summary -->
    <div class="wiki-cont"  *ngIf="field.type == TrackerFieldTypeEnum.wikiSummary">
      <!-- <input type="text" (change)="saveWikiVal($event)" [value]="field.value"> -->
      <div *ngIf="wikiSum" [innerHTML]="wikiSum"></div>
    </div>
  </div>
  <div class="edit-sec">
    <!-- Edit Section -->
    <mat-icon svgIcon="pencil"  
    nz-popover
    nzPlacement="right"
    nzTrigger="click"
    [nzTitle]="editTemplateTitle"
    [nzContent]="editTemplate" class="right" 
    [(nzVisible)]="editVisible"
    (nzVisibleChange)="onEditChange($event)"
    [style.visibility]="isHovered ? 'visible' : 'hidden'">
    </mat-icon>
  </div>
</div>

<!-- Template for Editing Field -->
<ng-template #editTemplateTitle><i nz-icon type="close"></i>Change Field</ng-template>
<ng-template #editTemplate>
  <div>
    <!-- Label -->
    <div *ngIf="field.type != TrackerFieldTypeEnum.wikiSummary">
      <mat-form-field>
        <mat-label [attr.for]="field">Label</mat-label>
        <input matInput
        (change)="changeLabel($event)" [value]="field.label"
        [id]="field.label" [type]="string">
      </mat-form-field> 
      <mat-icon *ngIf="!field.labelHidden" svgIcon="eye" (click)="toggleLabelVis()"></mat-icon>
      <mat-icon *ngIf="field.labelHidden" svgIcon="eye-off" (click)="toggleLabelVis()"></mat-icon>
    </div>
    <!-- Wiki Label Link-->
    <div *ngIf="field.type == TrackerFieldTypeEnum.wikiSummary">
      <mat-form-field>
        <mat-select [placeholder]="'Link To'">
          <mat-option *ngFor="let label of wikiLinkOptions" [value]="label" (click)="wikiLinkTo(label)">
            {{ label }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <!-- Field Type -->
    <div>
      <mat-form-field>
        <mat-select [placeholder]="fieldTypeString">
          <mat-option *ngFor="let item of typeOptions | keyvalue" [value]="item.value" (click)="changeType(item.key)">
            {{ item.key }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <mat-divider></mat-divider>
    <button class="btn-del" (click)="fieldRemove()">Delete</button>
  </div>
</ng-template>
